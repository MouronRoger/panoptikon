============================= test session starts ==============================
platform darwin -- Python 3.9.18, pytest-8.3.5, pluggy-1.5.0 -- /Users/james/Documents/GitHub/panoptikon/.venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/james/Documents/GitHub/panoptikon
configfile: pyproject.toml
plugins: asyncio-0.26.0, mock-3.14.0, cov-6.1.1
asyncio: mode=strict, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... collected 22 items

tests/core/test_db_pool.py::test_pool_initialization PASSED              [  4%]
tests/core/test_db_pool.py::test_pool_get_connection PASSED              [  9%]
tests/core/test_db_pool.py::test_pool_connection_reuse PASSED            [ 13%]
tests/core/test_db_pool.py::test_pool_max_connections PASSED             [ 18%]
tests/core/test_db_pool.py::test_pool_connection_health_check PASSED     [ 22%]
tests/core/test_db_pool.py::test_pool_connection_max_age PASSED          [ 27%]
tests/core/test_db_pool.py::test_pool_transaction PASSED                 [ 31%]
tests/core/test_db_pool.py::test_pool_different_isolation_levels PASSED  [ 36%]
tests/core/test_db_pool.py::test_pool_savepoint PASSED                   [ 40%]
tests/core/test_db_pool.py::test_pool_savepoint_context_manager PASSED   [ 45%]
tests/core/test_db_pool.py::test_pool_concurrent_access_param[10] PASSED [ 50%]
tests/core/test_db_pool.py::test_pool_concurrent_access_param[50] PASSED [ 54%]
tests/core/test_db_pool.py::test_pool_concurrent_access_param[100] PASSED [ 59%]
tests/core/test_db_pool.py::test_pool_concurrent_access_param[150] PASSED [ 63%]
tests/core/test_db_pool.py::test_pool_writer_contention PASSED           [ 68%]
tests/core/test_db_pool.py::test_pool_stress_leak_prevention PASSED      [ 72%]
tests/core/test_db_pool.py::test_pool_manager PASSED                     [ 77%]
tests/core/test_db_pool.py::test_pool_thread_safety PASSED               [ 81%]
tests/core/test_db_pool.py::test_connection_health_status PASSED         [ 86%]
tests/core/test_db_pool.py::test_transaction_isolation_level PASSED      [ 90%]
tests/core/test_db_pool.py::test_pooled_connection PASSED                [ 95%]
tests/core/test_db_pool.py::test_pool_invalid_params PASSED              [100%]
ERROR: Coverage failure: total of 30 is less than fail-under=80


================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.9.18-final-0 _______________

Name                                      Stmts   Miss  Cover
-------------------------------------------------------------
src/panoptikon/__init__.py                    1      0   100%
src/panoptikon/__main__.py                   32     32     0%
src/panoptikon/core/__init__.py               0      0   100%
src/panoptikon/core/config.py               245    199    19%
src/panoptikon/core/errors.py               178     91    49%
src/panoptikon/core/events.py               168    107    36%
src/panoptikon/core/lifecycle.py            135    135     0%
src/panoptikon/core/service.py              108     80    26%
src/panoptikon/database/__init__.py          14      4    71%
src/panoptikon/database/config.py            54     21    61%
src/panoptikon/database/connection.py        87     63    28%
src/panoptikon/database/pool.py             268     53    80%
src/panoptikon/database/pool_service.py      95     67    29%
src/panoptikon/database/schema.py           139    104    25%
src/panoptikon/database/service.py           70     49    30%
src/panoptikon/filesystem/__init__.py         7      0   100%
src/panoptikon/filesystem/access.py         287    214    25%
src/panoptikon/filesystem/bookmarks.py      214    174    19%
src/panoptikon/filesystem/cloud.py          139    103    26%
src/panoptikon/filesystem/events.py         107     61    43%
src/panoptikon/filesystem/paths.py          106     68    36%
src/panoptikon/filesystem/watcher.py        296    227    23%
src/panoptikon/search/__init__.py             0      0   100%
src/panoptikon/typings/__init__.py            0      0   100%
src/panoptikon/ui/__init__.py                 0      0   100%
src/panoptikon/ui/macos_app.py              127    127     0%
src/panoptikon/ui/objc_wrappers.py           79     79     0%
src/panoptikon/ui/validators.py              37     37     0%
src/panoptikon/utils/__init__.py              0      0   100%
-------------------------------------------------------------
TOTAL                                      2993   2095    30%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml
FAIL Required test coverage of 80% not reached. Total coverage: 30.00%
============================== 22 passed in 6.87s ==============================
